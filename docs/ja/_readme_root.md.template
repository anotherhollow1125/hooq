<div align="center">
<a href="https://docs.rs/hooq/{{version}}/hooq/" target="_blank">
<img src="https://raw.githubusercontent.com/anotherhollow1125/hooq/refs/heads/main/assets/hooq_eye_catch3.png" />
</a>
<h1>hooq</h1>

<h3>`?` å‰ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æŒ¿å…¥ã™ã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªãƒã‚¯ãƒ­</h3>

[![crate](https://img.shields.io/crates/v/hooq)](https://crates.io/crates/hooq)
[![docs](https://img.shields.io/docsrs/hooq/{{version}})](https://docs.rs/hooq/{{version}}/hooq/)
[![Rust](https://github.com/anotherhollow1125/hooq/actions/workflows/rust.yml/badge.svg)](https://github.com/anotherhollow1125/hooq/actions/workflows/rust.yml)

ğŸª hook ã¨ã„ã†åå‰ã¯ 'HOOk' ã¨ 'Question' æ¼”ç®—å­ ( `?` ) ãŒç”±æ¥ã§ã™ ğŸª

</div>

ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:
- ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«: (mdBook ã‚’æº–å‚™ä¸­ã§ã™)
- docs.rs: <https://docs.rs/hooq/{{version}}/hooq/>

<hr />

```rust
use hooq::hooq;

#[hooq]
#[hooq::method(.ok_or_else(|| format!("{} (L{}, {})", $expr_str, $line, $nth)))]
fn display_name(val: &toml::Value) -> Result<(), String> {
    let name = val.get("package")?.get("name")?.as_str()?;

    #[hooq::skip_all]
    if name.contains("4") {
        return Err("name contains '4'. Guido Mista disallow this.".to_string());
    }

    println!("name: {name}");

    Ok(())
}

#[hooq]
fn main() -> Result<(), Box<dyn std::error::Error>> {
    let cargo_toml = toml::from_str(&std::fs::read_to_string("Cargo.toml")?)?;

    display_name(&cargo_toml)?;

    Ok(())
}
```

ä¸Šè¨˜ãŒä»¥ä¸‹ã®ã‚ˆã†ã«å±•é–‹ã•ã‚Œã¾ã™ã€‚

```ignore
use hooq::hooq;
fn display_name(val: &toml::Value) -> Result<(), String> {
    let name = val
        .get("package")
        .ok_or_else(|| ::alloc::__export::must_use({
            ::alloc::fmt::format(
                format_args!("{0} (L{1}, {2})", "val.get(\"package\")", 6usize, "1st ?"),
            )
        }))?
        .get("name")
        .ok_or_else(|| ::alloc::__export::must_use({
            ::alloc::fmt::format(
                format_args!(
                    "{0} (L{1}, {2})", "val.get(\"package\") ? .get(\"name\")", 6usize,
                    "2nd ?",
                ),
            )
        }))?
        .as_str()
        .ok_or_else(|| ::alloc::__export::must_use({
            ::alloc::fmt::format(
                format_args!(
                    "{0} (L{1}, {2})",
                    "val.get(\"package\") ? .get(\"name\") ? .as_str()", 6usize, "3rd ?",
                ),
            )
        }))?;
    if name.contains("4") {
        return Err("name contains '4'. Guido Mista disallow this.".to_string());
    }
    {
        ::std::io::_print(format_args!("name: {0}\n", name));
    };
    Ok(())
}
fn main() -> Result<(), Box<dyn std::error::Error>> {
    let cargo_toml = toml::from_str(
            &std::fs::read_to_string("Cargo.toml")
                .inspect_err(|e| {
                    let path = "/path/to/your/project/src/main.rs";
                    let line = 20usize;
                    {
                        ::std::io::_eprint(
                            format_args!("[{0}:L{1}] {2:?}\n", path, line, e),
                        );
                    };
                })?,
        )
        .inspect_err(|e| {
            let path = "/path/to/your/project/src/main.rs";
            let line = 20usize;
            {
                ::std::io::_eprint(format_args!("[{0}:L{1}] {2:?}\n", path, line, e));
            };
        })?;
    display_name(&cargo_toml)
        .inspect_err(|e| {
            let path = "/path/to/your/project/src/main.rs";
            let line = 22usize;
            {
                ::std::io::_eprint(format_args!("[{0}:L{1}] {2:?}\n", path, line, e));
            };
        })?;
    Ok(())
}
```

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä»¥ä¸‹ã«ç¤ºã™ã‚ˆã†ã« `cargo add` ã§åŠ ãˆã‚‹ã‹ã€

```bash
cargo add hooq
```

`Cargo.toml` ã«åŠ ãˆã¦ãã ã•ã„ã€‚

```toml
[dependencies]
hooq = "{{version}}"
```

## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æŒ¿å…¥ã•ã‚Œã‚‹ãƒ¡ã‚½ãƒƒãƒ‰

`#[hooq]` ã¨ã—ã¦ç‰¹ã«æŒ‡å®šã—ãªã‘ã‚Œã°æ¬¡ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒæŒ¿å…¥ã•ã‚Œã¾ã™ã€‚

```ignore
.inspect_err(|e| {
    let path = $path;
    let line = $line;

    ::std::eprintln!("[{path}:L{line}] {e:?}");
})
```

`#[hooq::method(...)]` ä¸æ´»æ€§ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã§ãƒ•ãƒƒã‚¯ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ä»–ã€ãƒã‚¯ãƒ­å‘¼ã³å‡ºã—éƒ¨ã‚’ `#[hooq(log)]` ã‚„ `#[hooq(anyhow)]` ã¨ã—ã¦Flavorã‚’æŒ‡å®šã—ãŸå ´åˆãªã©ã¯ã€ãã®Flavorã«ã¡ãªã‚“ã ãƒ¡ã‚½ãƒƒãƒ‰ã«ãªã‚Šã¾ã™ï¼

ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ Flavor ã¯æ¬¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰è¦‹ã‚‰ã‚Œã¾ã™: [hooq-macros/src/impls/flavor/presets/](https://github.com/anotherhollow1125/hooq/tree/main/hooq-macros/src/impls/flavor/presets)

(ä»Šå¾Œæ‹¡å……äºˆå®šã§ã™ï¼)

## ã‚¢ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆ

(WIP)

## ãƒ¡ã‚¿å¤‰æ•°

(WIP)

## Flavor

(WIP)
